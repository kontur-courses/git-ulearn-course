<?xml version="1.0"?>
<slide id="6a38cf54-8f82-4390-a0eb-4ddd33f15dff" title="Задание S3-5. Reflog" xmlns="https://ulearn.me/schema/v2">

<markdown>
# Введение

Git старается защищать от случайного удаления веток, но давай посмотрим, что будет, если все же проигнорировать предупреждения.

# Шаг 1

Чтобы эксперимент точно завершился успешно, переключись на ветку `refs-feature`, а затем переключись на ветку `main`.

# Шаг 2

Удали ветку `refs-feature`. Git будет сопротивляться, так что используй принудительный (усиленный) вариант.

&gt; Как принудительно удалить локальную ветку
[в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BF%D1%80%D0%B8%D0%BD%D1%83%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE+%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C+%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%83%D1%8E+%D0%B2%D0%B5%D1%82%D0%BA%D1%83+%D0%B2+Git+Bash)
| [в Git Graph в VS Code?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BF%D1%80%D0%B8%D0%BD%D1%83%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE+%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C+%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%83%D1%8E+%D0%B2%D0%B5%D1%82%D0%BA%D1%83+%D0%B2+Git+Graph+%D0%B2+VS+Code)

Открой дерево коммитов в терминале или Git Graph и убедись, что ветка `refs-feature` и коммит из нее больше не отображаются.

&gt; Дерево коммитов в терминале можно открыть командой `git log --graph --oneline --decorate --all` или с помощью алиаса `git graph`

# Шаг 3

Воспользуйся журналом перемещений ссылок reflog, чтобы найти действия, связанные с веткой `refs-feature`. `HEAD` перемещался как при создании ветки `refs-feature`, так и при переключении на нее, так что следы определенно есть.

В действии, связанным с `refs-feature`, скопируй хэш коммита и переключись на этот коммит по хэшу.

После этого коммит должен стать видимым в дереве коммитов. Убедись в этом с помощью команды в терминале или Git Graph.

&gt; Как посмотреть историю перемещений HEAD [в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BF%D0%BE%D1%81%D0%BC%D0%BE%D1%82%D1%80%D0%B5%D1%82%D1%8C+%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8E+%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B9+HEAD+%D0%B2+Git+Bash)

&gt; Как прокручивать (скроллить) вывод команды [в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BF%D1%80%D0%BE%D0%BA%D1%80%D1%83%D1%87%D0%B8%D0%B2%D0%B0%D1%82%D1%8C+%28%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%D0%B8%D1%82%D1%8C%29+%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4+%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B+%D0%B2+Git+Bash)

&gt; Как выйти из режима прокрутки [в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%B2%D1%8B%D0%B9%D1%82%D0%B8+%D0%B8%D0%B7+%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0+%D0%BF%D1%80%D0%BE%D0%BA%D1%80%D1%83%D1%82%D0%BA%D0%B8+%D0%B2+Git+Bash)

&gt; Как переключиться на коммит по хэшу [в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BF%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%D1%81%D1%8F+%D0%BD%D0%B0+%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82+%D0%BF%D0%BE+%D1%85%D1%8D%D1%88%D1%83+%D0%B2+Git+Bash)

&gt; Как использовать reflog для перехода на скрытый коммит [в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C+reflog+%D0%B4%D0%BB%D1%8F+%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0+%D0%BD%D0%B0+%D1%81%D0%BA%D1%80%D1%8B%D1%82%D1%8B%D0%B9+%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82+%D0%B2+Git+Bash)

# Шаг 4

Коммит удаленной ветки `refs-feature` видим, потому что на него указывает `HEAD`. Чтобы этот коммит снова не исчез, надо использовать более постоянную ссылку: tag или branch.

Восстанови ветку на этом коммите, но назови ее теперь иначе — `rerefs-feature`. Другими словами, создай ветку `rerefs-feature` на текущем коммите.

# Шаг 5

Переключись на ветку `main`, а затем убедись, что коммит `Add s3.md` и ветка `rerefs-feature` никуда не исчезли. Если все так, то поздравляю с успешным нахождением потерянного коммита!

Дополнительный вопрос: как думаешь, шаг 1 этого задания был необходим?

# Результат

*Теперь история коммитов должна выглядеть так:*
</markdown>
<galleryImages>
    <image>images\s3-5-finish.png</image>
</galleryImages>

</slide>
