<?xml version="1.0"?>
<slide id="2a4128c7-03ce-4ffb-97b8-6721a6ca20cf" title="Задание S2-3. No mistakes" xmlns="https://ulearn.me/schema/v2">

<markdown>
# Постановка задачи

При внесении изменений случаются ошибки. Благо Git отслеживает изменения и позволяет легко откатить неудачные.

# Шаг 1

Добавь файл `secrets.txt` с таким содержимым:
```
login: TechWizard
password: ForTheHorde
```

Добавь файл `secrets.txt` в Commit index и убедись, что он туда попал.

# Шаг 2

Измени содержимое файла `s1.md` на следующее:
```
# S1. Репозитории

#### Репозиторий — хранилище версий исходников

#### Рабочий каталог — текущая версия кода

#### Ничего, кроме исходников, не должно попадать в репозиторий

- `git init` — создать пустой репозиторий
- `git init --bare` — создать пустой репозиторий без рабочего каталога
- `git clone &lt;url&gt;` — склонировать репозиторий в новый каталог
- `git clone --bare &lt;url&gt;` — склонировать репозиторий без рабочего каталога
- `git clean -xdf` — удалить неотслеживаемые файлы из рабочего каталога
```

Измени содержимое файла `s2.md` на следующее:
```
# S2. Коммиты

#### История версий — дерево коммитов

#### Коммиты неизменны, а хэш — идентификатор коммита

#### Ничего, кроме исходников, не должно попадать в репозиторий
```

Убедись, что Git обнаружил изменения `s1.md` и `s2.md`.

# Шаг 3

Как думаешь, какие ошибки были допущены в предыдущих изменениях? В каждом ли из трех изменений была ошибка?

Выведи все изменения в терминале с помощью `git diff` и просмотри их. Скорее всего появится прокрутка. Используй клавишу `q`, когда закончишь, чтобы выйти из прокрутки.

*Выглядеть должно так:*  
</markdown>
<galleryImages>
    <image>images\s2-3-diff.png</image>
</galleryImages>
<markdown>

&gt; Как прокручивать (скроллить) вывод команды [в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BF%D1%80%D0%BE%D0%BA%D1%80%D1%83%D1%87%D0%B8%D0%B2%D0%B0%D1%82%D1%8C+%28%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%D0%B8%D1%82%D1%8C%29+%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4+%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B+%D0%B2+Git+Bash)

&gt; Как выйти из режима прокрутки [в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%B2%D1%8B%D0%B9%D1%82%D0%B8+%D0%B8%D0%B7+%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0+%D0%BF%D1%80%D0%BE%D0%BA%D1%80%D1%83%D1%82%D0%BA%D0%B8+%D0%B2+Git+Bash)

Ревью кода помогло обнаружить ошибки?

Ревью также удобно делать с помощью графических инструментов VS Code. Открой Source Control в VS Code и посмотри на изменения там.

*Выглядеть должно так:*  
</markdown>
<galleryImages>
    <image>images\s2-3-difftool.png</image>
</galleryImages>
<markdown>

**Так какой твой окончательный вердикт по ошибкам?**

# Шаг 4

В репозитории должны храниться исходники, а секретов быть не должно. Поэтому файл `secrets.txt` не должен попасть в репозиторий. Но вполне может храниться в Working directory для целей разработки.

Сначала убери `secrets.txt` из Commit index.

&gt; Как отменить добавление в индекс
[с помощью restore в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BE%D1%82%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C+%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5+%D0%B2+%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81+%D1%81+%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E+restore+%D0%B2+Git+Bash)
| [в VS Code?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BE%D1%82%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C+%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5+%D0%B2+%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81+%D0%B2+VS+Code)

Затем добавь файл `secrets.txt` в `.gitignore`, чтобы Git его игнорировал. Да, в `.gitignore` можно и часто полезно использовать шаблоны, чтобы сразу игнорировать целые множества вариантов. Но здесь будет достаточно игнорировать конкретный файл.

В терминале с помощью `git status` или с помощью Source Control в VS Code проверь, что `secrets.txt` теперь не видно среди измененных файлов. Но сам файл должен остаться в файловой системе.

# Шаг 5

Осталось разобраться с изменениями еще в двух файлах. И вот правильный ответ: неверные изменения были добавлены в файл про коммиты. Там все команды Git исчезли! Отмени изменения в этом файле.

&gt; Как отменить неудачные изменения
[в Git Bash?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BE%D1%82%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C+%D0%BD%D0%B5%D1%83%D0%B4%D0%B0%D1%87%D0%BD%D1%8B%D0%B5+%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F+%D0%B2+Git+Bash)
| [в VS Code?](https://www.google.com/search?q=%D0%9A%D0%B0%D0%BA+%D0%BE%D1%82%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C+%D0%BD%D0%B5%D1%83%D0%B4%D0%B0%D1%87%D0%BD%D1%8B%D0%B5+%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F+%D0%B2+VS+Code)

# Шаг 6

В сухом остатке должно быть два файла с изменениями `s1.md` и `.gitignore`. Эти изменения надо закоммитить с сообщением `Keep secrets`.

# Результат задания

*Теперь история коммитов должна выглядеть так:*
</markdown>
<galleryImages>
    <image>images\s2-3-finish.png</image>
</galleryImages>

</slide>
